function [v] = actuateCup(a, p, v, mode)

if mode % Pickup cup
    
    while readDigitalPin(a.a, p.cupswitch)
        
        % Move stepper down
        MoveStepper(a.s, 1, 40, 40)
        
        % Wait for movement to complete
        pause(0.4)
    end
    
    % Enable electromagnet
    writeDigitalPin(a.a, p.magnet, 1)
    
    pause(0.2)
    
    % Move stepper down
    MoveStepper(a.s, 0, 40, 200)
    
else % drop cup

end

